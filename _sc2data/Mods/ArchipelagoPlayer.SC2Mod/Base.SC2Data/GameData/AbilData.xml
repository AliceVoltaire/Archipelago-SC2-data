<?xml version="1.0" encoding="utf-8"?>
<Catalog>
    <CAbilEffectInstant id="AP_Stimpack">
        <AbilSetId value="Stimpack"/>
        <EditorCategories value="Race:Terran,AbilityorEffectType:Units"/>
        <InfoTooltipPriority value="1"/>
        <Flags index="Transient" value="1"/>
        <Cost>
            <Vital index="Life" value="10"/>
        </Cost>
        <CmdButtonArray index="Execute" DefaultButtonFace="Stim" State="Restricted" Requirements="AP_UseStimpackSM">
            <Flags index="ToSelection" value="1"/>
        </CmdButtonArray>
    </CAbilEffectInstant>
    <CAbilEffectInstant id="AP_StimpackMarauder">
        <AbilSetId value="Stimpack"/>
        <EditorCategories value="Race:Terran,AbilityorEffectType:Units"/>
        <Flags index="Transient" value="1"/>
        <Cost>
            <Vital index="Life" value="20"/>
            <Charge Link="Abil/AP_Stimpack"/>
            <Cooldown Link="Abil/AP_Stimpack"/>
        </Cost>
        <Marker Link="Abil/AP_Stimpack"/>
        <AINotifyEffect value="Stimpack"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="Stim" Requirements="AP_UseStimpack">
            <Flags index="ToSelection" value="1"/>
        </CmdButtonArray>
        <InfoTooltipPriority value="1"/>
    </CAbilEffectInstant>
    <CAbilEffectTarget id="AP_heal">
        <EditorCategories value="Race:Terran,AbilityorEffectType:Units"/>
        <Flags index="AllowMovement" value="1"/>
        <Flags index="AutoCast" value="1"/>
        <Flags index="AutoCastOn" value="1"/>
        <Flags index="NoDeceleration" value="1"/>
        <Flags index="ReExecutable" value="1"/>
        <Flags index="Smart" value="1"/>
        <Flags index="PassengerAcquirePassengers" value="1"/>
        <TargetFilters value="Ground,Biological,Visible;Self,Enemy,Air,Structure,Missile,UnderConstruction,Dead,Hidden,Invulnerable"/>
        <TargetSorts RequestCount="1">
            <SortArray value="TSAlliancePassive"/>
            <SortArray value="TSDistance"/>
            <SortArray value="TSLifeFraction"/>
        </TargetSorts>
        <Range value="2"/>
        <SmartValidatorArray value="healSmartTargetFilters"/>
        <SmartValidatorArray value="NotWarpingIn"/>
        <AutoCastAcquireLevel value="Defensive"/>
        <AutoCastFilters value="Visible;Neutral,Enemy"/>
        <AutoCastRange value="6"/>
        <AutoCastValidatorArray value="healCasterMinEnergy"/>
        <AutoCastValidatorArray value="NotWarpingIn"/>
        <Marker Link="Abil/MedivacHeal"/>
        <AINotifyEffect value="MedivacHeal"/>
        <UseMarkerArray index="Approach" value="0"/>
        <UseMarkerArray index="Prep" value="0"/>
        <DefaultError value="RequiresHealTarget"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="AP_MedicHeal"/>
        <AcquireAttackers value="1"/>
        <FollowRange value="1.5"/>
    </CAbilEffectTarget>
    <CAbilRedirectInstant id="AP_StimpackRedirect">
        <AbilSetId value="Stimpack"/>
        <Abil value="AP_Stimpack"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="StimRedirect" Requirements="UseStimpack">
            <!-- TODO: verify this -->
            <Flags index="ToSelection" value="1"/>
        </CmdButtonArray>
    </CAbilRedirectInstant>
    <CAbilRedirectInstant id="AP_StimpackMarauderRedirect">
        <AbilSetId value="Stimpack"/>
        <Abil value="AP_StimpackMarauder"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="StimRedirect" Requirements="UseStimpack">
            <!-- TODO: verify this -->
            <Flags index="ToSelection" value="1"/>
        </CmdButtonArray>
    </CAbilRedirectInstant>
    <CAbilEffectTarget id="AP_D8Charge">
        <Alignment value="Negative"/>
        <EditorCategories value="Race:Terran,AbilityorEffectType:Units"/>
        <Cost>
            <Cooldown Link="AP_D8Charge" TimeUse="60"/>
        </Cost>
        <TargetFilters value="Ground,Visible;-"/>
        <Range value="5"/>
        <CastOutroTime value="0.35"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="AP_D8Charge" State="Restricted" Requirements="AP_UseG4ClusterBombs"/>
    </CAbilEffectTarget>
    <CAbilSpecialize id="AP_MakeVultureSpiderMines">
        <EditorCategories value="Race:Terran,AbilityorEffectType:Units"/>
        <Activity value="UI/AP_SpiderMineBuilding"/>
        <InfoArray index="Specialize1" Time="12" Effect="AP_ReplenishMines">
            <Resource index="Minerals" value="15"/>
            <Display index="Minerals" value="1"/>
            <Charge>
                <CountMax value="3"/>
                <CountUse value="1"/>
                <HideCount value="1"/>
                <Location value="Unit"/>
            </Charge>
            <Button DefaultButtonFace="AP_SpiderMineReplenish" Requirements="AP_UseNanoConstructor"/>
            <Flags index="AutoCast" value="1"/>
        </InfoArray>
        <Alert value="BuildComplete"/>
        <Flags index="BestUnit" value="0"/>
    </CAbilSpecialize>
    <CAbilEffectTarget id="AP_SpiderMineUnburrowRangeDummy">
        <EditorCategories value="Race:Terran,AbilityorEffectType:Units"/>
        <Range value="2"/>
    </CAbilEffectTarget>
    <CAbilQueue id="AP_VultureQueue3">
        <EditorCategories value="Race:Neutral,AbilityorEffectType:Structures"/>
        <QueueSize value="3"/>
        <Flags index="Passive" value="1"/>
    </CAbilQueue>
    <CAbilMorph id="AP_VultureSpiderMineUnburrow">
        <EditorCategories value="Race:Terran,AbilityorEffectType:Units"/>
        <ActorKey value="BurrowUp"/>
        <Flags index="AutoCast" value="1"/>
        <Flags index="AutoCastOn" value="1"/>
        <Flags index="IgnoreFacing" value="1"/>
        <Flags index="SuppressMovement" value="1"/>
        <Cost>
            <Charge Link="Abil/AP_SpiderMineUnburrow"/>
            <Cooldown Link="Abil/AP_SpiderMineUnburrow"/>
        </Cost>
        <InfoArray Unit="AP_SpiderMine">
            <SectionArray index="Actor">
                <DurationArray index="Duration" value="0.6"/>
            </SectionArray>
            <SectionArray index="Mover">
                <DurationArray index="Duration" value="0.6"/>
            </SectionArray>
            <SectionArray index="Stats">
                <DurationArray index="Duration" value="0.6"/>
                <EffectArray index="Start" value="AP_SpiderMineInvulnerable"/>
            </SectionArray>
        </InfoArray>
        <AutoCastFilters value="Ground,Visible;Player,Ally,Neutral,Structure,Worker,Missile,Stasis,Dead,Hidden,Invulnerable,Benign"/>
        <AutoCastRange value="2"/>
        <AutoCastCountMin value="1"/>
    </CAbilMorph>
    <CAbilEffectTarget id="AP_VultureSpiderMines">
        <EditorCategories value="Race:Terran,AbilityorEffectType:Units"/>
        <Effect index="0" value="AP_SpawnSpiderMineSet"/>
        <Cost>
            <Charge>
                <CountMax value="3"/>
                <CountStart value="3"/>
                <CountUse value="1"/>
                <Location value="Unit"/>
            </Charge>
        </Cost>
        <Placeholder value="SpiderMine"/>
        <Range value="3"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="AP_SpiderMine"/>
    </CAbilEffectTarget>
    <CAbilMorph id="AP_VultureSpiderMineBurrow">
        <EditorCategories value="Race:Terran,AbilityorEffectType:Units"/>
        <ActorKey value="BurrowDown"/>
        <Flags index="AutoCast" value="1"/>
        <Flags index="AutoCastOn" value="1"/>
        <Flags index="IgnoreFacing" value="1"/>
        <Flags index="SuppressMovement" value="1"/>
        <Cost>
            <Charge Link="Abil/AP_SpiderMineBurrow"/>
            <Cooldown Link="Abil/AP_SpiderMineBurrow"/>
        </Cost>
        <InfoArray Unit="AP_SpiderMineBurrowed">
            <SectionArray index="Actor">
                <DurationArray index="Delay" value="3.5332"/>
                <DurationArray index="Duration" value="1.067"/>
            </SectionArray>
            <SectionArray index="Mover">
                <DurationArray index="Delay" value="3.5332"/>
                <DurationArray index="Duration" value="1"/>
            </SectionArray>
            <SectionArray index="Stats">
                <DurationArray index="Delay" value="4.5332"/>
                <EffectArray index="Start" value="AP_SpiderMineVulnerable"/>
            </SectionArray>
        </InfoArray>
        <AutoCastFilters value="Ground,Visible;Player,Ally,Neutral,Structure,Worker,Missile,Stasis,Dead,Hidden,Invulnerable,Benign"/>
        <AutoCastRange value="2"/>
    </CAbilMorph>
    <CAbilMorph id="AP_SiegeMode">
        <AbilSetId value="SiegeMode"/>
        <EditorCategories value="Race:Terran,AbilityorEffectType:Units"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="SiegeMode" Requirements="AP_UseSiegeMode">
            <Flags index="ToSelection" value="1"/>
        </CmdButtonArray>
        <Flags index="SuppressMovement" value="1"/>
        <InfoArray Unit="AP_SiegeTankSieged" RandomDelayMax="0.5">
            <SectionArray index="Abils">
                <DurationArray index="Delay" value="0.5"/>
            </SectionArray>
            <SectionArray index="Actor">
                <DurationArray index="Delay" value="0.5"/>
                <DurationArray index="Duration" value="3.5417"/>
            </SectionArray>
            <SectionArray index="Facing">
                <DurationArray index="Duration" value="0.5"/>
            </SectionArray>
            <SectionArray index="Mover">
                <DurationArray index="Delay" value="0.5"/>
            </SectionArray>
            <SectionArray index="Stats">
                <DurationArray index="Delay" value="0.5"/>
                <DurationArray index="Duration" value="3.5417"/>
            </SectionArray>
        </InfoArray>
    </CAbilMorph>
    <CAbilMorph id="AP_Unsiege">
        <AbilSetId value="Unsieged"/>
        <EditorCategories value="Race:Terran,AbilityorEffectType:Units"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="Unsiege">
            <Flags index="ToSelection" value="1"/>
        </CmdButtonArray>
        <Flags index="IgnoreFacing" value="1"/>
        <Flags index="SuppressMovement" value="1"/>
        <InfoArray Unit="AP_SiegeTank" RandomDelayMax="0.5">
            <SectionArray index="Actor">
                <DurationArray index="Duration" value="3.5417"/>
            </SectionArray>
            <SectionArray index="Stats">
                <DurationArray index="Duration" value="3.5417"/>
            </SectionArray>
        </InfoArray>
    </CAbilMorph>
    <CAbilEffectTarget id="AP_MedivacDoubleBeamHeal">
        <Alignment value="Positive"/>
        <EditorCategories value="Race:Terran,AbilityorEffectType:Units"/>
        <Effect index="0" value="AP_MedivacHealInitialSwitch"/>
        <Flags index="AllowMovement" value="1"/>
        <Flags index="AutoCast" value="1"/>
        <Flags index="AutoCastOn" value="1"/>
        <Flags index="NoDeceleration" value="1"/>
        <Flags index="ReExecutable" value="1"/>
        <Flags index="Smart" value="1"/>
        <TargetFilters value="Biological,Visible;Self,Enemy,Structure,Missile,Uncommandable,Dead,Hidden,Invulnerable"/>
        <TargetSorts RequestCount="1">
            <SortArray value="TSAlliancePassive"/>
            <SortArray value="TSLifeFraction"/>
            <SortArray value="TSDistance"/>
        </TargetSorts>
        <Range value="4"/>
        <Arc value="14.9963"/>
        <SmartValidatorArray value="healSmartTargetFilters"/>
        <SmartValidatorArray value="NotWarpingIn"/>
        <AutoCastAcquireLevel value="Defensive"/>
        <AutoCastFilters value="Visible;Neutral,Enemy,Missile,Stasis,Dead,Invulnerable"/>
        <AutoCastRange value="6"/>
        <AutoCastValidatorArray value="healCasterMinEnergy"/>
        <AutoCastValidatorArray value="NotWarpingIn"/>
        <!-- Vanilla says NotStopping but this might be a bug -->
        <Marker Link="Abil/MedivacHeal"/>
        <UseMarkerArray index="Approach" value="0"/>
        <UseMarkerArray index="Prep" value="0"/>
        <AINotifyEffect value="MedivacHeal"/>
        <DefaultError value="RequiresHealTarget"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="AP_Heal" Requirements="AP_AdvancedHealingAIPurchased"/>
        <AcquireAttackers value="1"/>
    </CAbilEffectTarget>
    <CAbilEffectTarget id="AP_MedivacHeal">
        <EditorCategories value="Race:Terran,AbilityorEffectType:Units"/>
        <Flags index="AllowMovement" value="1"/>
        <Flags index="AutoCast" value="1"/>
        <Flags index="AutoCastOn" value="1"/>
        <Flags index="NoDeceleration" value="1"/>
        <Flags index="ReExecutable" value="1"/>
        <Flags index="Smart" value="1"/>
        <TargetFilters value="Biological,Visible;Self,Enemy,Structure,Missile,Uncommandable,Dead,Hidden,Invulnerable"/>
        <TargetSorts RequestCount="1">
            <SortArray value="TSAlliancePassive"/>
            <SortArray value="TSLifeFraction"/>
            <SortArray value="TSDistance"/>
        </TargetSorts>
        <Range value="4"/>
        <Arc value="14.9963"/>
        <SmartValidatorArray value="healSmartTargetFilters"/>
        <SmartValidatorArray value="NotWarpingIn"/>
        <AutoCastAcquireLevel value="Defensive"/>
        <AutoCastFilters value="Visible;Neutral,Enemy,Missile,Stasis,Dead,Invulnerable"/>
        <AutoCastRange value="6"/>
        <AutoCastValidatorArray value="healCasterMinEnergy"/>
        <AutoCastValidatorArray value="NotWarpingIn"/>
        <Marker Link="Abil/MedivacHeal"/>
        <UseMarkerArray index="Approach" value="0"/>
        <UseMarkerArray index="Prep" value="0"/>
        <AINotifyEffect value="MedivacHeal"/>
        <DefaultError value="RequiresHealTarget"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="AP_Heal" Requirements="AP_AdvancedHealingAINotPurchased"/>
        <AcquireAttackers value="1"/>
    </CAbilEffectTarget>
    <CAbilTransport id="AP_MedivacTransport">
        <AbilSetId value="ULdM"/>
        <EditorCategories value="Race:Terran,AbilityorEffectType:Units"/>
        <CmdButtonArray index="Load" DefaultButtonFace="MedivacLoad"/>
        <CmdButtonArray index="UnloadAll">
            <Flags index="Hidden" value="1"/>
            <Flags index="ToSelection" value="1"/>
        </CmdButtonArray>
        <CmdButtonArray index="UnloadAt" DefaultButtonFace="MedivacUnloadAll"/>
        <CmdButtonArray index="UnloadUnit">
            <Flags index="Hidden" value="1"/>
        </CmdButtonArray>
        <CmdButtonArray index="LoadAll">
            <Flags index="Hidden" value="1"/>
        </CmdButtonArray>
        <Flags index="CargoDeath" value="1"/>
        <MaxCargoCount value="8"/>
        <MaxCargoSize value="8"/>
        <TotalCargoSpace value="8"/>
        <UnloadPeriod value="1"/>
    </CAbilTransport>
    <CAbilBehavior id="AP_WraithCloak">
        <AbilSetId value="Clok"/>
        <EditorCategories value="Race:Terran,AbilityorEffectType:Units"/>
        <CmdButtonArray index="On" DefaultButtonFace="AP_CloakOn" Requirements="AP_UseWraithCloak">
            <Flags index="ToSelection" value="1"/>
        </CmdButtonArray>
        <CmdButtonArray index="Off" DefaultButtonFace="AP_CloakOff">
            <Flags index="ToSelection" value="1"/>
        </CmdButtonArray>
        <Flags index="Toggle" value="1"/>
        <Flags index="Transient" value="1"/>
        <Cost>
            <Vital index="Energy" value="25"/>
        </Cost>
        <BehaviorArray value="AP_WraithCloak"/>
    </CAbilBehavior>
</Catalog>
