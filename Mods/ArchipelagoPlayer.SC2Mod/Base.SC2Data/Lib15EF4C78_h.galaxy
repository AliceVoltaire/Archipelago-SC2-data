include "TriggerLibs/natives"

//--------------------------------------------------------------------------------------------------
// Library: Archipelago Player Handlers
//--------------------------------------------------------------------------------------------------
// Preset Declarations
const int lib15EF4C78_ge_CampaignHeroes2_None = 0;
const int lib15EF4C78_ge_CampaignHeroes2_Artanis = 1;
const int lib15EF4C78_ge_CampaignHeroes2_Kerrigan = 2;
const int lib15EF4C78_ge_CampaignHeroes2_Zagara = 3;
const int lib15EF4C78_ge_CampaignHeroes2_LaserDrill = 4;
const int lib15EF4C78_ge_CampaignHeroes2_Hyperion = 5;
const int lib15EF4C78_ge_CampaignHeroes2_KerriganReviveCocoon = 6;
const int lib15EF4C78_ge_CampaignHeroes2_ZagaraReviveCocoon = 7;
const int lib15EF4C78_ge_CampaignHeroes2_Nova = 8;
const int lib15EF4C78_ge_CampaignHeroes2_Alarak = 9;
const int lib15EF4C78_ge_CampaignHeroes2_NovaReviveBeacon = 10;
const int lib15EF4C78_ge_CampaignHeroes2_AlarakReviveBeacon = 11;
const int lib15EF4C78_ge_CampaignHeroes2_Fenix = 12;
const int lib15EF4C78_ge_CampaignHeroes2_FenixDragoon = 13;
const int lib15EF4C78_ge_CampaignHeroes2_FenixArbiter = 14;
const int lib15EF4C78_ge_CampaignHeroes2_Selendis = 15;
const int lib15EF4C78_ge_CampaignHeroes2_Colarion = 16;
const int lib15EF4C78_ge_CampaignHeroes2_Megalith = 17;
const int lib15EF4C78_ge_CampaignHeroes2_Dehaka = 18;
const int lib15EF4C78_ge_CampaignHeroes2_DehakasDen = 19;
const int lib15EF4C78_ge_CampaignHeroes2_ArtifactTruck = 20;
const int lib15EF4C78_ge_CampaignHeroes2_Tychus = 21;
const int lib15EF4C78_ge_CampaignHeroes2_TychusReviveBeacon = 22;
const int lib15EF4C78_ge_CampaignHeroes2_Zeratul = 23;
const int lib15EF4C78_ge_CampaignHeroes2_ZeratulReviveBeacon = 24;
const int lib15EF4C78_ge_CampaignHeroes2_Gary = 25;
const int lib15EF4C78_ge_CampaignHeroes2_SuperGary = 26;
const int lib15EF4C78_ge_CampaignHeroes2_GaryReviveBeacon = 27;
const int lib15EF4C78_ge_CampaignHeroes_None = 0;
const int lib15EF4C78_ge_CampaignHeroes_Kerrigan = 1;
const int lib15EF4C78_ge_CampaignHeroes_Dehaka = 2;
const int lib15EF4C78_ge_CampaignHeroes_Stukov = 3;
const int lib15EF4C78_ge_HeroUnit_Kerrigan = 0;
const int lib15EF4C78_ge_HeroUnit_Stukov = 1;
const int lib15EF4C78_ge_HeroUnit_Dehaka = 2;

// Constants
const string lib15EF4C78_gv_aP_Player_ON_PRIMARY_TOWN_HALL_INIT_EVENT = "AP_Player_onPrimaryTownHallInitEvent";
const string lib15EF4C78_gv_aP_Player_ON_PRIMARY_TOWN_HALL_DEATH_EVENT = "AP_Player_OnPrimaryTownHallDeathEvent";
const string lib15EF4C78_gv_aP_Player_ON_PRIMARY_TOWN_HALL_AFTER_DEATH_FOUND_EVENT = "AP_Player_OnPrimaryTownHallAfterDeathFoundEvent";
const fixed lib15EF4C78_gv_cUC_HeroUpdateFrequency = 0.25;
const int lib15EF4C78_gv_cUC_HeroMaxCount = 20;
const int lib15EF4C78_gv_cUC_HEROUISHIELDBARHEIGHT = 8;
const int lib15EF4C78_gv_cUC_HEROUIENERGYBARHEIGHT = 8;
const int lib15EF4C78_gv_cUC_HEROUILIFEBARHEIGHT = 20;
const int lib15EF4C78_gv_cUC_HEROUIBARWIDTH = 200;
const fixed lib15EF4C78_gv_zS_SwarmHeroUIUpdateFrequency = 0.25;
const string lib15EF4C78_gv_zSC_HeroReviveLinkKerrigan = "Abil/AP_KerriganRevive";
const int lib15EF4C78_gv_zSC_KERRIGANMAXLEVEL = 70;
const string lib15EF4C78_gv_aP_PLAYER_TRANSFORMER_LAND_EVENT = "AP_PLAYER_TRANSFORMER_LAND";

// Variable Declarations
fixed lib15EF4C78_gv_kerriganPsiStrikeFacing;
fixed lib15EF4C78_gv_kerriganPsiStrikeEnergyCost;
unit[21] lib15EF4C78_gv_aP_Player_PrimaryTownHall;
int lib15EF4C78_gv_aP_Player_OnPrimaryTownHallDeath__player;
unit lib15EF4C78_gv_aP_Player_OnPrimaryTownHallDeath__unit;
int lib15EF4C78_gv_aP_Player_OnPrimaryTownHallAfterDeathFound__player;
unit lib15EF4C78_gv_aP_Player_OnPrimaryTownHallAfterDeathFound__unit;
string lib15EF4C78_gv_aP_Player_ON_PRIMARY_TOWN_HALL_SET_EVENT;
unit lib15EF4C78_gv_aP_Player_OnPrimaryTownHallSet__oldBuilding;
unit lib15EF4C78_gv_aP_Player_OnPrimaryTownHallSet__newBuilding;
fixed[lib15EF4C78_gv_cUC_HeroMaxCount + 1][21] lib15EF4C78_gv_cU_HeroReviveTimer;
fixed lib15EF4C78_gv_cU_HeroCooldownTime;
unit[lib15EF4C78_gv_cUC_HeroMaxCount + 1][21] lib15EF4C78_gv_cU_HeroUnit;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1][21] lib15EF4C78_gv_cU_HeroType;
string[lib15EF4C78_gv_cUC_HeroMaxCount + 1][21] lib15EF4C78_gv_cU_HeroIcon;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1][21] lib15EF4C78_gv_cU_HeroPositionX;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1][21] lib15EF4C78_gv_cU_HeroPositionY;
bool[lib15EF4C78_gv_cUC_HeroMaxCount + 1][21] lib15EF4C78_gv_cU_HeroShowLevel;
bool[21][lib15EF4C78_gv_cUC_HeroMaxCount + 1] lib15EF4C78_gv_cU_HeroExists;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1] lib15EF4C78_gv_cU_HeroPanel;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1] lib15EF4C78_gv_cU_HeroDialogBorderImage;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1] lib15EF4C78_gv_cU_HeroDialogBorderImageNoEnergy;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1] lib15EF4C78_gv_cU_HeroDialogBorderImageAll;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1] lib15EF4C78_gv_cU_HeroDialogIconImage;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1] lib15EF4C78_gv_cU_HeroDialogCooldownImage;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1] lib15EF4C78_gv_cU_HeroDialogDamageTakenImage;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1] lib15EF4C78_gv_cU_HeroDialogDamageTakenLabel;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1] lib15EF4C78_gv_cU_HeroDialogNameLabel;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1] lib15EF4C78_gv_cU_HeroDialogLevelLabel;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1] lib15EF4C78_gv_cU_HeroDialogHealthBarImage;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1] lib15EF4C78_gv_cU_HeroDialogHealthBarBackground;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1] lib15EF4C78_gv_cU_HeroDialogShieldBarImage;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1] lib15EF4C78_gv_cU_HeroDialogShieldBarBackground;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1] lib15EF4C78_gv_cU_HeroDialogEnergyBarImage;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1] lib15EF4C78_gv_cU_HeroDialogEnergyBarBackground;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1] lib15EF4C78_gv_cU_HeroDialogHealthLabel;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1] lib15EF4C78_gv_cU_HeroDialogEnergyLabel;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1] lib15EF4C78_gv_cU_HeroDialogShieldLabel;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1] lib15EF4C78_gv_cU_HeroDialogButton;
int[lib15EF4C78_gv_cUC_HeroMaxCount + 1] lib15EF4C78_gv_cU_HeroDialogLevelBox;
fixed[lib15EF4C78_gv_cUC_HeroMaxCount + 1][21] lib15EF4C78_gv_cU_VoidHeroUIDamageTimer;
bool[lib15EF4C78_gv_cUC_HeroMaxCount + 1][21] lib15EF4C78_gv_cU_VoidHeroUIRevivable;
int lib15EF4C78_gv_cU_HeroAutomaticIndex;
unit[3] lib15EF4C78_gv_zS_SwarmHeroUIUnit;
int[3] lib15EF4C78_gv_zS_SwarmHeroUIType;
string[3] lib15EF4C78_gv_zS_SwarmHeroUIIcon;
int[3] lib15EF4C78_gv_zS_SwarmHeroUIPositionX;
int[3] lib15EF4C78_gv_zS_SwarmHeroUIPositionY;
bool[3] lib15EF4C78_gv_zS_SwarmHeroUIShowLevel;
int[3] lib15EF4C78_gv_zS_SwarmHeroUIPanel;
int[3] lib15EF4C78_gv_zS_SwarmHeroUIDialogBorderImage;
int[3] lib15EF4C78_gv_zS_SwarmHeroUIDialogBorderImageNoEnergy;
int[3] lib15EF4C78_gv_zS_SwarmHeroUIDialogIconImage;
int[3] lib15EF4C78_gv_zS_SwarmHeroUIDialogCooldownImage;
int[3] lib15EF4C78_gv_zS_SwarmHeroUIDialogDamageTakenImage;
int[3] lib15EF4C78_gv_zS_SwarmHeroUIDialogDamageTakenLabel;
int[3] lib15EF4C78_gv_zS_SwarmHeroUIDialogNameLabel;
int[3] lib15EF4C78_gv_zS_SwarmHeroUIDialogLevelLabel;
int[3] lib15EF4C78_gv_zS_SwarmHeroUIDialogHealthBarImage;
int[3] lib15EF4C78_gv_zS_SwarmHeroUIDialogHealthBarBackground;
int[3] lib15EF4C78_gv_zS_SwarmHeroUIDialogEnergyBarImage;
int[3] lib15EF4C78_gv_zS_SwarmHeroUIDialogEnergyBarBackground;
int[3] lib15EF4C78_gv_zS_SwarmHeroUIDialogHealthLabel;
int[3] lib15EF4C78_gv_zS_SwarmHeroUIDialogEnergyLabel;
int[3] lib15EF4C78_gv_zS_SwarmHeroUIDialogButton;
int[3] lib15EF4C78_gv_zS_SwarmHeroUIDialogLevelBox;
int[3] lib15EF4C78_gv_zS_SwarmHeroUIDialogLevelupPortrait;
fixed[3] lib15EF4C78_gv_zS_SwarmHeroUIDamageTimer;
bool lib15EF4C78_gv_zS_KerriganHeroPanelLevelUpEffectPlaying;
fixed lib15EF4C78_gv_zS_SwarmHeroUIDamage;
bool[21] lib15EF4C78_gv_aP_Player_isKerriganRevivableForPlayer;
fixed lib15EF4C78_gv_zS_ReviveCooldownTimeKerrigan;
unit[21] lib15EF4C78_gv_zS_HeroReviverKerrigan;
point lib15EF4C78_gv_zS_HeroDeathPoint;
string lib15EF4C78_gv_zS_KerriganReviveFirstTimeMission;
actor lib15EF4C78_gv_zS_KerriganActor;
int lib15EF4C78_gv_zS_ReviveKerriganPlayerAsyncParam;
bool[21] lib15EF4C78_gv_zS_ReviveKerriganInterupt;
unit[21] lib15EF4C78_gv_kerriganUnit;
int lib15EF4C78_gv_zS_KerriganCheatXP;
int[21] lib15EF4C78_gv_zS_KerriganLevel;
int lib15EF4C78_gv_zS_KerriganActualLevel;
unit lib15EF4C78_gv_zS_Kerrigan;
int lib15EF4C78_gv_zS_KerriganPing;
unit lib15EF4C78_gv_zS_Dehaka;
unit lib15EF4C78_gv_zS_Stukov;
int lib15EF4C78_gv_zS_KerriganPhase;
int lib15EF4C78_gv_zS_KerriganLevelLabel;
unit lib15EF4C78_gv_aP_PlayerTransformerLandTriggeringUnit;

// Function Declarations
string lib15EF4C78_gf_AP_Player_findNovaWeapon (unit lp_sourceNovaUnit);
int lib15EF4C78_gf_AP_Player_OnPrimaryTownHallDeath__getPlayer ();
unit lib15EF4C78_gf_AP_Player_OnPrimaryTownHallDeath__getUnit ();
int lib15EF4C78_gf_AP_Player_OnPrimaryTownHallAfterDeathFound__getPlayer ();
unit lib15EF4C78_gf_AP_Player_OnPrimaryTownHallAfterDeathFound__getUnit ();
unit lib15EF4C78_gf_AP_Player_OnPrimaryTownHallSet__getOldBuilding ();
unit lib15EF4C78_gf_AP_Player_OnPrimaryTownHallSet__getNewBuilding ();
void lib15EF4C78_gf_AP_Player_findPrimaryTownHall (int lp_player);
unit lib15EF4C78_gf_AP_Player_getPrimaryTownHall (int lp_player);
void lib15EF4C78_gf_ZerglingRespawnSetPrimaryHatchery (int lp_player, unit lp_building);
void lib15EF4C78_gf_SetHeroPanelUnit2 (int lp_index, unit lp_heroUnit, int lp_player);
void lib15EF4C78_gf_SetHeroPanelUnitOverride (int lp_index, unit lp_heroUnit, int lp_player);
void lib15EF4C78_gf_CU_ShowHideHeroPanel (bool lp_showHide, int lp_index);
void lib15EF4C78_gf_CU_CreateHeroPanel (int lp_index);
int lib15EF4C78_gf_CU_HeroTypeFromUnitType (string lp_unitType);
string lib15EF4C78_gf_CU_HeroIcon (int lp_heroType, unit lp_heroUnit);
void lib15EF4C78_gf_CU_UpdateHeroPanel (int lp_index, int lp_player);
string lib15EF4C78_gf_CU_PresetToHeroGameLink (int lp_championPreset);
bool lib15EF4C78_gf_CU_ChampionHasShields (int lp_heroType);
bool lib15EF4C78_gf_CU_ChampionHasShields2 (int lp_heroType);
void lib15EF4C78_gf_SetHeroPanelUnit (int lp_index, unit lp_heroUnit, int lp_player);
void lib15EF4C78_gf_ZS_ShowHideHeroPanel (bool lp_showHide);
void lib15EF4C78_gf_ZS_CreateHeroPanel (int lp_index);
void lib15EF4C78_gf_ZS_UpdateHeroPanel (int lp_player, int lp_index);
void lib15EF4C78_gf_ZS_PlayKerriganHeroPanelLevelUpEffect ();
unit lib15EF4C78_gf_ZS_HeroReviveCocoon (int lp_player, int lp_heroType);
void lib15EF4C78_gf_SetHeroReviverCocoon (int lp_heroType, unit lp_cocoon, int lp_player);
bool lib15EF4C78_gf_AP_Player_isKerriganRevivable (int lp_player);
void lib15EF4C78_gf_AP_Player_setKerriganRevivable (int lp_player, bool lp_value);
bool lib15EF4C78_gf_AP_Player_isKerriganAlive (int lp_player);
unit lib15EF4C78_gf_AP_Player_getKerriganUnit (int lp_player);
void lib15EF4C78_gf_StartKerriganReviveCooldown (int lp_player);
void lib15EF4C78_gf_AP_Player_ZS_ReviveCooldownReadyKerriganController (int lp_player);
void lib15EF4C78_gf_ReviveHeroInstantly (int lp_player, int lp_type, bool lp_displayReviveMessage);
void lib15EF4C78_gf_ZS_KerriganCustomStatusBarUpdate (int lp_player);
void lib15EF4C78_gf_ZS_LevelUpKerrigan ();
void lib15EF4C78_gf_ZS_RecalculateKerriganXP ();
int lib15EF4C78_gf_ZS_KerriganLevelXPMax (int lp_level);
int lib15EF4C78_gf_ZS_KerriganLevelFromXP (int lp_xP);
int lib15EF4C78_gf_ZS_KerriganXPFromLevel (int lp_level);
int lib15EF4C78_gf_ZS_KerriganReturnLevelBonusLife (int lp_kerriganLevel);
int lib15EF4C78_gf_ZS_KerriganReturnLevelBonusEnergy (int lp_kerriganLevel);
int lib15EF4C78_gf_ZS_KerriganReturnLevelBonusArmor (int lp_kerriganLevel);
int lib15EF4C78_gf_ZS_KerriganReturnLevelBonusDamage (int lp_kerriganLevel);
void lib15EF4C78_gf_ZS_ApplyKerriganLevelBonus (int lp_player, int lp_level);
int lib15EF4C78_gf_AP_Player_getKerriganLevel (int lp_player);
unit lib15EF4C78_gf_AP_PlayerTransfrormerLand_getTriggeringUnit ();

// Trigger Declarations
trigger lib15EF4C78_gt_ArchipelagoPlayerHandlersConstructor;
trigger lib15EF4C78_gt_ReactorswaptoAP_Barracks;
trigger lib15EF4C78_gt_ReactorswaptoBarracks;
trigger lib15EF4C78_gt_ReactorswaptoAP_Factory;
trigger lib15EF4C78_gt_ReactorswaptoFactory;
trigger lib15EF4C78_gt_ReactorswaptoAP_Starport;
trigger lib15EF4C78_gt_ReactorswaptoStarport;
trigger lib15EF4C78_gt_TechLabswaptoAP_Barracks;
trigger lib15EF4C78_gt_TechLabswaptoBarracks;
trigger lib15EF4C78_gt_TechLabswaptoAP_Factory;
trigger lib15EF4C78_gt_TechLabswaptoFactory;
trigger lib15EF4C78_gt_TechLabswaptoAP_Starport;
trigger lib15EF4C78_gt_TechLabswaptoStarport;
trigger lib15EF4C78_gt_TechReactorswaptoAP_Barracks;
trigger lib15EF4C78_gt_TechReactorswaptoAP_Factory;
trigger lib15EF4C78_gt_TechReactorswaptoAP_Starport;
trigger lib15EF4C78_gt_AP_Player_setHolodecoyWeapon;
trigger lib15EF4C78_gt_Set5SecondsMark;
trigger lib15EF4C78_gt_ZerglingRespawnInit;
trigger lib15EF4C78_gt_KerriganPsiStrike;
trigger lib15EF4C78_gt_SlayerInit;
trigger lib15EF4C78_gt_CreepTumorBuild;
trigger lib15EF4C78_gt_AP_Player_FindPrimaryTownHallForAllPlayers;
trigger lib15EF4C78_gt_AP_Player_OnPrimaryTownHallDeathEmitEvent;
trigger lib15EF4C78_gt_AP_Player_OnPrimaryTownHallDeathSeekNew;
trigger lib15EF4C78_gt_CU_HeroPanelUpdate;
trigger lib15EF4C78_gt_CU_HeroUnitDamaged;
trigger lib15EF4C78_gt_CU_HeroUnitVitalChange;
trigger lib15EF4C78_gt_CU_HeroMouseHoverText;
trigger lib15EF4C78_gt_ZS_HeroPanelUpdate;
trigger lib15EF4C78_gt_ZS_SwarmHeroUIUnitDamaged;
trigger lib15EF4C78_gt_ZS_SwarmHeroUIUnitVitalChange;
trigger lib15EF4C78_gt_ZS_MouseHoverText;
trigger lib15EF4C78_gt_AP_Player_ZS_ReviveCooldownReadyKerriganAsyncRunner;
trigger lib15EF4C78_gt_AP_Player_ZS_KerriganDied;
trigger lib15EF4C78_gt_EmitTransformerLand;

// Library Initialization
void lib15EF4C78_InitVariables ();

